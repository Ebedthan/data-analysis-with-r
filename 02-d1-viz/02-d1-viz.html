<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>02-d1-viz.utf8</title>
    <meta charset="utf-8" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/all.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/v4-shims.css" rel="stylesheet" />
    <link rel="stylesheet" href="../slides.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

class: first-slide

&lt;br/&gt;
.pull-left[
&lt;h1&gt;L'analyse des donn√©es avec&lt;/h1&gt;
]

.pull-right[
&lt;br/&gt;
&lt;img src="../img/Rlogo.png" width="80%" height="auto"&gt;
]
&lt;h2 style="text-align:center;"&gt;La visualisation des donn√©es üìà&lt;/h2&gt;
&lt;h3 style="color:#162C9a; text-align:center;"&gt;Anicet Ebou&lt;/h3&gt;
&lt;h5 style="text-align:center;"&gt;Seminaire @ Agence Emploi Jeunes, Abidjan&lt;br/&gt;
2020-01-27 - 2020-01-29&lt;/h5&gt;
---





class: center, middle, inverse

# La visualisation des donn√©es

---

.left-column[

## Qu'est ce que c'est?

]

.right-column[
.quote[
"The simple graph has brought more information to the data analyst‚Äôs mind than any other device." ‚Äî John Tukey
]

- La visualisation des donn√©es est la cr√©ation et l'√©tude de la repr√©sentation visuelle des donn√©es.
- Il existe de nombreux outils pour visualiser les donn√©es (R est l'un d'eux), et de nombreuses approches/syst√®mes dans R pour faire des visualisations de donn√©es (**ggplot2** est l'un d'eux, et c'est ce que nous allons utiliser).
]
---

## ggplot2 `\(\in\)` tidyverse

.pull-left[
![](./img/ggplot2-part-of-tidyverse.png)
]

.pull-right[
- ggplot2 est le package de visualisation de donn√©es de tidyverse.
- Le **gg** dans ggplot2 signifie grammar of graphics (grammaire des graphiques) 
- La **grammaire des graphiques** viens du livre du m√™me nom de Leland Wilkinson.
- La grammaire des graphiques permet de d√©crire (et donc de construire) de facon pr√©cise les composants d'un graphique.
]

---


```r
ggplot(data = agri, mapping = aes(x = land, y = agri_val_added)) + 
  geom_point() + 
  labs(title = "Agriculture value added to GDP vs. Agricultural land (CI)", 
       x = "agricultural land (%)", y = "Agriculture contribution to GDP (%)")
```

```
## Warning: Removed 3 rows containing missing values (geom_point).
```

![](02-d1-viz_files/figure-html/unnamed-chunk-3-1.png)&lt;!-- --&gt;
.question[
Quelles sont les fonctions pour desiner le graphe? Quelles sont les donn√©es utilis√©es pour le graphe? Quelles sont les variables en abscisse et en ordonn√©e? Que signifie le warning?
]

---


```r
ggplot(data = agri, mapping = aes(x = land, y = agri_val_added)) + 
  geom_point() + 
* geom_smooth() +
  labs(title = "Agriculture value added to GDP vs. Agricultural land (CI)", 
       x = "agricultural land (%)", y = "Agriculture contribution to GDP (%)")
```

```
## `geom_smooth()` using method = 'loess' and formula 'y ~ x'
```

![](02-d1-viz_files/figure-html/unnamed-chunk-4-1.png)&lt;!-- --&gt;
.question[
Quelle est la diff√©rence entre ce graphe et le pr√©c√©dent? Qu'est ce que geom_smooth() apporte de plus?
]

---

## Hi ggplot2!

- ggplot() est la fonction principale du package ggplot2 et les graphiques sont construits **en couches**.
- La structure du code des graphiques peut √™tre synth√©tis√© comme: 


```r
ggplot +
  geom_xxx
```
ou plus pr√©cisement

```r
ggplot(data = [dataset], mapping = aes(x = [x-variable], y = [y=variable])) +
  geom_xxx() +
  other_options
```

- Il faut charger le package ggplot2 avant de pouvoir utiliser la fonction ggplot()


```r
library(tidyverse)
```
---

class: middle, center, inverse

# Visualisons une partie de afrods

---

.question[
Que repr√©sente chaque colonne, chaque ligne?
]


```r
agri
```

```
##          country year agri_val_added     land industry_val_added
## 1  Cote d'Ivoire 1960             NA       NA           13.13878
## 2  Cote d'Ivoire 1961       46.40683 49.30818           13.87897
## 3  Cote d'Ivoire 1962       45.90405 49.93711           13.98191
## 4  Cote d'Ivoire 1963       44.16710 49.93711           14.70021
## 5  Cote d'Ivoire 1964       39.80136 50.25157           16.06381
## 6  Cote d'Ivoire 1965       39.61846 50.56604           15.92724
## 7  Cote d'Ivoire 1966       37.44038 50.56604           17.88553
## 8  Cote d'Ivoire 1967       34.75976 50.78616           18.88138
## 9  Cote d'Ivoire 1968       35.56116 50.78616           16.29886
...
```
--
- Les colonnes repr√©sentent **les variables**
- Les lignes repr√©sentent **les observations**

---

## Que retrouve t'on dans ces donn√©es?

Jetons un coup d'oeil:


```r
glimpse(agri)
```

```
## Observations: 52
## Variables: 5
## $ country            &lt;chr&gt; "Cote d'Ivoire", "Cote d'Ivoire", "Cote d'Ivoire",‚Ä¶
## $ year               &lt;dbl&gt; 1960, 1961, 1962, 1963, 1964, 1965, 1966, 1967, 19‚Ä¶
## $ agri_val_added     &lt;dbl&gt; NA, 46.40683, 45.90405, 44.16710, 39.80136, 39.618‚Ä¶
## $ land               &lt;dbl&gt; NA, 49.30818, 49.93711, 49.93711, 50.25157, 50.566‚Ä¶
## $ industry_val_added &lt;dbl&gt; 13.13878, 13.87897, 13.98191, 14.70021, 16.06381, ‚Ä¶
```

.question[
Combien de lignes et de colonnes contient ce tableau?
]

- Vous pouvez lire sur le r√©sultat de glimpse()
- Ou pour un jeu de donn√©es integr√© en utilisant ?dataset: ` ?starwars`

---

## Value added to GDP vs Agricultural land


```r
ggplot(data = agri, mapping = aes(x = land, y = agri_val_added)) + 
  geom_point() + 
  labs(title = "Agriculture value added to GDP vs. Agricultural land (CI)", 
       x = "agricultural land (%)", y = "Agriculture contribution to GDP (%)")
```

```
## Warning: Removed 3 rows containing missing values (geom_point).
```

![](02-d1-viz_files/figure-html/unnamed-chunk-10-1.png)&lt;!-- --&gt;

---

## Qu'est ce que c'est cette alerte?

- Il existe des valeurs manquantes dans le jeu de donn√©es (d'ou 3 d'entre eux n'ont pas √©t√© pris en compte).
- Nous allons dans les futurs slides supprimer cette alerte pour faire un peu de place, cependant il est important de noter cela.

---

## Value added vs land percentage

.instructions[
Comment d√©cririez vous cette relation? Quel autres facteurs permetraient d'expliquer cette relation?
]


```r
ggplot(data = agri, mapping = aes(x = land, y = agri_val_added)) + 
  geom_point() + 
* labs(title = "Agriculture value added to GDP vs. Agricultural land (CI)",
*      x = "agricultural land (%)", y = "Agriculture contribution to GDP (%)")
```

![](02-d1-viz_files/figure-html/unnamed-chunk-11-1.png)&lt;!-- --&gt;

---

## Diversification !!


```r
ggplot(data = agri, mapping = aes(x = year, y = industry_val_added)) + 
  geom_point() + 
* labs(title = "Industry value added to GDP vs. Years (CI)",
*      x = "Years", y = "Industry value added to GDP (%)")
```

![](02-d1-viz_files/figure-html/unnamed-chunk-12-1.png)&lt;!-- --&gt;

---

## Variables additionnelles

D'autres variables additionnelles peuvent √™tre ajout√©s:

- aesthetics
  - shape
  - colour (or color)
  - size
  - alpha (transparency)
- faceting: plusieurs graphes montrant diff√©rents sous graphiques

---

class: center, middle, inverse

# Aesthetics

---

## Aesthetics options

Les options des graphiques qui peuvent √™tre **li√©es √† des variables** du jeu de donn√©es sont
- color
- size
- shape
- alpha (transparency)

---

## Value added vs. land percentage + country


```r
ggplot(data = agri_all, mapping = aes(
         x = agri_val_added, 
         y = land, color = country)) + geom_point()
```

![](02-d1-viz_files/figure-html/unnamed-chunk-13-1.png)&lt;!-- --&gt;

---

## Value added vs. land + country

Relions la taille (size) √† l'ann√©e (year):


```r
ggplot(data = agri_all, mapping = aes(
  x = agri_val_added, y = land, color = country,
* size = year
  )) + geom_point()
```

![](02-d1-viz_files/figure-html/unnamed-chunk-14-1.png)&lt;!-- --&gt;

---

## Value added vs. land + country

Agrandisons cette fois ci la taille de tout les points *non* sur les valeurs des variables:


```r
ggplot(data = agri_all, mapping = aes(
* x = agri_val_added, y = land, color = country)) + geom_point(size = 2)
```

![](02-d1-viz_files/figure-html/unnamed-chunk-15-1.png)&lt;!-- --&gt;

---

## R√©sumons les aesthetics

- Les variables continues sont mesur√©es sur une √©chelle continue.
- Les variables dicr√®tes sont mesur√©es (ou souvent compt√©es) sur une √©chelle discrete.

aesthetics    | discrete                 | continuous
------------- | ------------------------ | -------------
color         | rainbow of colors        | gradient
size          | discrete steps           | correspondance lineaire entre le rayon et la valeur
shape         | different shape for each | ne doit pas marcher (et ne marche pas)

- Utiliser les aesthetics pour lier les caract√©ristiques d'un graphique √† une variable, d√©finir les caract√©ristiques **non li√©es** √† des variables √† l'int√©rieur des geom_*().

---

class: center, middle, inverse

# Sous graphiques

---

### Les options pour les sous-graphiques

- Les sous-graphiques permettent d'afficher des echantillons plus petits du jeu de donn√©es.
- Utile pour explorer les relations conditionnelles et les donn√©es volumineuses.


```r
ggplot(data = agri_all, mapping = aes(
  x = agri_val_added, y = land)) + 
* facet_grid(. ~ country) +
  geom_point() +
  labs(title = "Agriculture value added to GDP vs. Land use (CI)", 
*      subtitle = "Faceted by country",
       x = "Land use", y = "Value added to GDP (%)")
```

![](02-d1-viz_files/figure-html/unnamed-chunk-16-1.png)&lt;!-- --&gt;

---

## En eau profonde

.instructions[
Dans les prochaines slides, reflechissez sur ce que repr√©sente chaque graphique et pensez au code qui le gen√®re.
]


.alert[
Les graphiques des prochains slides n'ont pas de titre, et de nom pour les axes parce que nous voulons nous concentrer uniquement sur ce qui se passe. Mais les graphes doivent toujours √™tre labelis√©s.
]

---


```r
ggplot(data = agri_all, mapping = aes(x = agri_val_added, y = land)) + 
  geom_point() +
  facet_grid(country ~ .)
```

![](02-d1-viz_files/figure-html/unnamed-chunk-17-1.png)&lt;!-- --&gt;

---


```r
ggplot(data = agri_all, mapping = aes(x = agri_val_added, y = land)) + 
  geom_point() +
  facet_grid(. ~ country)
```

![](02-d1-viz_files/figure-html/unnamed-chunk-18-1.png)&lt;!-- --&gt;

---


```r
ggplot(data = agri_all, mapping = aes(x = agri_val_added, y = land)) + 
  geom_point() +
  facet_wrap(~ country)
```

![](02-d1-viz_files/figure-html/unnamed-chunk-19-1.png)&lt;!-- --&gt;

---

## R√©sumons

- `facet_grid()`:
   - 2d grid
   - ligne ~ cols
   - utiliser `.` pour ne pas subdiviser
- `facet_wrap()`: bande 1d converti en 2d

---

class: middle, center, inverse

# Identification des variables

---

## Nombre de variables dans une analyse

- Analyse de donn√©e univari√©e: distribution d'un seule variable.
- Analyse de donn√©es bivari√©e: relation entre deux variables.
- Analyse de donn√©es multivari√©e: relation entre plusieurs variables en un coup; se focalisant en g√©n√©ral sur une relation entre deux variables en conditionnant les autres.

---

## Types de variables

- Les **variables numeriques** peuvent √™tre class√©es comme **discr√®tes** ou **continues** selon qu'elles peuvent respectivement prendre ou pas un nombre infinie de valeur ou uniquement des valeurs positives.
- Si une variable est **cat√©gorielle** on peut d√©terminer si elle est **ordinale** en se basant sur le 
ggplot

---

class: middle, center, inverse

# La visualisation des donn√©es num√©riques

---

## Description des formes des distributions num√©riques

- forme:
  - asym√©trie: asym√©trie √† droite, asym√©trie √† gauche, sym√©trie parfaite
  - modalit√©: unimodale, bimodale, multimodale, uniforme
- valeur centrale: moyenne (mean), medianne (median), mode  (pas toujours utile)
- dispersion: √©tendue (range), variance (standard deviation, sd), Ecart interquartile (IQR)
- observations inhabituelles

---

## Histogrammes


```r
ggplot(data = agri, mapping = aes(x = land)) +
  geom_histogram(binwidth = 1)
```

![](02-d1-viz_files/figure-html/unnamed-chunk-20-1.png)&lt;!-- --&gt;

---

## Diagramme de densit√©


```r
ggplot(data = agri, mapping = aes(x = land)) +
  geom_density()
```

![](02-d1-viz_files/figure-html/unnamed-chunk-21-1.png)&lt;!-- --&gt;

---

## Boite √† moustache


```r
ggplot(data = agri_all, mapping = aes(y = land, x = country)) +
  geom_boxplot()
```

![](02-d1-viz_files/figure-html/unnamed-chunk-22-1.png)&lt;!-- --&gt;

---

class: center, middle, inverse

# La visualisation des donn√©es cat√©gorielles

---

## Diagramme en b√¢tons


```r
ggplot(data = starwars, mapping = aes(x = gender)) +
  geom_bar()
```

![](02-d1-viz_files/figure-html/unnamed-chunk-23-1.png)&lt;!-- --&gt;

---

### Diagramme en b√¢tons segment√©, les nombres


```r
ggplot(data = starwars, mapping = aes(x = gender, fill = hair_color)) +
  geom_bar()
```

![](02-d1-viz_files/figure-html/unnamed-chunk-24-1.png)&lt;!-- --&gt;

---

### Diagramme en b√¢tons segment√©, les pourcentages


```r
ggplot(data = starwars, mapping = aes(x = gender, fill = hair_color)) +
  geom_bar(position = "fill") +
  labs(y = "proportion")
```

![](02-d1-viz_files/figure-html/unnamed-chunk-25-1.png)&lt;!-- --&gt;

---

### Quel est le diagramme en b√¢ton le plus appropri√©?

.question[
Quel est le graphe en baton le plus appropri√© pour repr√©senter la relation entre le genre et la couleur des cheveux
]


```r
starwars &lt;- starwars %&gt;%
  mutate(hair_color2 = fct_other(hair_color,
                                 keep = c("black", "brown", "brown", "blond")))
```

![](02-d1-viz_files/figure-html/unnamed-chunk-27-1.png)&lt;!-- --&gt;![](02-d1-viz_files/figure-html/unnamed-chunk-27-2.png)&lt;!-- --&gt;

---
class: center, middle

# Fin de la troisi√®me session !
# Merci !
&lt;h1&gt; üëè &lt;/h1&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
